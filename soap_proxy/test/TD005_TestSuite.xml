<?xml version="1.0" encoding="UTF-8"?>
<con:testSuite name="TD005_TestSuite" xmlns:con="http://eviware.com/soapui/config">
  <con:description>This test suite is the collection of test cases described in the O3S Software Validation 
Specificaiton document (O3S_SVS), section 7.5 Test Cases for TD_005.
The test cases may be run individually, or all together using 'Launch TestRunner'. </con:description>
  <con:settings/>
  <con:runType>SEQUENTIAL</con:runType>
  <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="GetCapabilities Valid TestCase" searchProperties="true"><con:settings/><con:testStep type="request" name="GetCapabilities"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>spSoapBinding</con:interface><con:operation>GetCapabilities</con:operation><con:request name="GetCapabilities"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://176.9.245.37/sp_eowcs</con:endpoint><con:request><![CDATA[<soapenv:Envelope 
  xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" 
  xmlns:ns="http://www.opengis.net/wcs/2.0" 
  xmlns:ns1="http://www.opengis.net/ows/2.0">
   <soapenv:Header/>
   <soapenv:Body>
      <ns:GetCapabilities updateSequence="u2001" service="WCS">
         <ns1:AcceptVersions>
            <ns1:Version>2.0.0</ns1:Version>
         </ns1:AcceptVersions>
      </ns:GetCapabilities>
      </ns:GetCapabilities>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault"/><con:assertion type="Schema Compliance" name="Schema Compliance"><con:configuration><definition/></con:configuration></con:assertion><con:assertion type="XQuery Match" name="Profile-wcs-soap"><con:configuration><path>declare namespace ogc='http://www.opengis.net/ogc';
declare namespace swe='http://www.opengis.net/swe/2.0';
declare namespace gml='http://www.opengis.net/gml/3.2';
declare namespace ows='http://www.opengis.net/ows/2.0';
declare namespace wcs='http://www.opengis.net/wcs/2.0';
declare namespace xlink='http://www.w3.org/1999/xlink';
declare namespace soapenv='http://schemas.xmlsoap.org/soap/envelope/';
declare namespace gmlcov='http://www.opengis.net/gmlcov/1.0';
//ows:Profile[2]</path><content>&lt;ows:Profile xmlns:ows="http://www.opengis.net/ows/2.0">http://www.opengis.net/spec/WCS_protocol-binding_soap/1.0&lt;/ows:Profile></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:assertion type="XQuery Match" name="Profile-eowcs-soap"><con:configuration><path>declare namespace ogc='http://www.opengis.net/ogc';
declare namespace swe='http://www.opengis.net/swe/2.0';
declare namespace gml='http://www.opengis.net/gml/3.2';
declare namespace ows='http://www.opengis.net/ows/2.0';
declare namespace wcs='http://www.opengis.net/wcs/2.0';
declare namespace xlink='http://www.w3.org/1999/xlink';
declare namespace soapenv='http://schemas.xmlsoap.org/soap/envelope/';
declare namespace gmlcov='http://www.opengis.net/gmlcov/1.0';
//ows:Profile[3]</path><content>&lt;ows:Profile xmlns:ows="http://www.opengis.net/ows/2.0">http://www.opengis.net/spec/WCS_application-profile_earth-observation/1.0/conf/eowcs_soap&lt;/ows:Profile></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="OperationsMetadata  contains SOAP"><con:configuration><scriptText>/*
 *  SOAPUI script to check GetCapabilities response againtst OGC 09-149r requirement 2,
 *  "[...] shall specify the HTTP POST request encodings accepted by including an
 * ows:Constraint element, with “PostEncoding” as the value of the name attribute and
 * with a value of “SOAP” to indicate that SOAP encoding is allowed."
 *
 *  Copyright (C) 2011 ANF DATA spol. s r.o. 
 */
def constrSelect = "ows:Post/ows:Constraint[@name='PostEncoding']/ows:AllowedValues"
def checkString  = "SOAP"
log.info "Checking that every node matching " + constrSelect +" contains an ows:Value '"+checkString+"'."
def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def holder = groovyUtils.getXmlHolder( "GetCapabilities#Response" )

holder.namespaces["ows"] = "http://www.opengis.net/ows/2.0"
import com.eviware.soapui.support.xml.XmlUtils

def nodeCount = holder.getDomNodes("//ows:Operation/*/*/"+constrSelect).length
log.info "Count of Operation nodes= "+nodeCount

def nStrings = 0
for (def nodeIndex = 1; nodeIndex &lt;= nodeCount; nodeIndex++) {
	def node =  holder.getDomNodes("//ows:Operation["+nodeIndex+"]/*/*/"+constrSelect+"/ows:Value")
	node.each {
		if (it.firstChild.nodeValue ==checkString) {
			nStrings++
			log.info "Found: " + it.getQName()+" = "+it.firstChild.nodeValue
		}
	}
}
assert nStrings>0
</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="CoverageId Mer_"><con:configuration><scriptText>/*
 *  SOAPUI script to check that the CoverageSummary in the response 
 *   contains the expcted dataset ID.
 *
 *  Copyright (C) 2011 ANF DATA spol. s r.o. 
 */
def constrSelect = "//wcs:Contents/wcs:CoverageSummary"
def checkString  = "MER_FRS_1PNPDE20060816_090929_000001972050_00222_23322_0058_uint16_reduced_compressed"
log.info "Checking for CoverageSummary contents. "
def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def holder = groovyUtils.getXmlHolder( "GetCapabilities#Response" )

holder.namespaces["ows"] = "http://www.opengis.net/ows/2.0"
holder.namespaces["wcs"]="http://www.opengis.net/wcs/2.0"
import com.eviware.soapui.support.xml.XmlUtils

def nodeCount = holder.getDomNodes(constrSelect).length
assert nodeCount==3

def found = 0
for (def nodeIndex = 1; nodeIndex &lt;= nodeCount; nodeIndex++) {
	def nodeTxt = holder.getNodeValue(constrSelect+"["+nodeIndex+"]/wcs:CoverageId")
     if (nodeTxt ==checkString) { 
     	found=1 
     	log.info "Found: " + nodeTxt
     	}
}
assert found>0

log.info "OK"</scriptText></con:configuration></con:assertion><con:assertion type="XQuery Match" name="OperationsMetadata exact match"><con:configuration><path>declare namespace ogc='http://www.opengis.net/ogc';
declare namespace swe='http://www.opengis.net/swe/2.0';
declare namespace gml='http://www.opengis.net/gml/3.2';
declare namespace ows='http://www.opengis.net/ows/2.0';
declare namespace wcs='http://www.opengis.net/wcs/2.0';
declare namespace xlink='http://www.w3.org/1999/xlink';
declare namespace soapenv='http://schemas.xmlsoap.org/soap/envelope/';
declare namespace gmlcov='http://www.opengis.net/gmlcov/1.0';
//ows:OperationsMetadata</path><content><![CDATA[<ows:OperationsMetadata xmlns:ows="http://www.opengis.net/ows/2.0" xmlns:xlink="http://www.w3.org/1999/xlink">
  <ows:Operation name="GetCapabilities">
    <ows:DCP>
      <ows:HTTP>
        <ows:Post xlink:type="simple" xlink:href="http://SERVER_UNDEFINED/service">
          <ows:Constraint name="PostEncoding">
            <ows:AllowedValues>
              <ows:Value>SOAP</ows:Value>
            </ows:AllowedValues>
          </ows:Constraint>
        </ows:Post>
      </ows:HTTP>
    </ows:DCP>
  </ows:Operation>
  <ows:Operation name="DescribeCoverage">
    <ows:DCP>
      <ows:HTTP>
        <ows:Post xlink:type="simple" xlink:href="http://SERVER_UNDEFINED/service">
          <ows:Constraint name="PostEncoding">
            <ows:AllowedValues>
              <ows:Value>SOAP</ows:Value>
            </ows:AllowedValues>
          </ows:Constraint>
        </ows:Post>
      </ows:HTTP>
    </ows:DCP>
  </ows:Operation>
  <ows:Operation name="GetCoverage">
    <ows:DCP>
      <ows:HTTP>
        <ows:Post xlink:type="simple" xlink:href="http://SERVER_UNDEFINED/service">
          <ows:Constraint name="PostEncoding">
            <ows:AllowedValues>
              <ows:Value>SOAP</ows:Value>
            </ows:AllowedValues>
          </ows:Constraint>
        </ows:Post>
      </ows:HTTP>
    </ows:DCP>
  </ows:Operation>
  <ows:Operation name="DescribeEOCoverageSet">
    <ows:DCP>
      <ows:HTTP>
        <ows:Post xlink:type="simple" xlink:href="http://SERVER_UNDEFINED/service">
          <ows:Constraint name="PostEncoding">
            <ows:AllowedValues>
              <ows:Value>SOAP</ows:Value>
            </ows:AllowedValues>
          </ows:Constraint>
        </ows:Post>
      </ows:HTTP>
    </ows:DCP>
  </ows:Operation>
  <ows:Constraint name="CountDefault">
    <ows:NoValues/>
    <ows:DefaultValue>100</ows:DefaultValue>
  </ows:Constraint>
</ows:OperationsMetadata>]]></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:assertion type="XQuery Match" name="Contents exact match"><con:configuration><path>declare namespace ogc='http://www.opengis.net/ogc';
declare namespace swe='http://www.opengis.net/swe/2.0';
declare namespace gml='http://www.opengis.net/gml/3.2';
declare namespace ows='http://www.opengis.net/ows/2.0';
declare namespace wcs='http://www.opengis.net/wcs/2.0';
declare namespace wcseo='http://www.opengis.net/wcseo/1.0';
declare namespace xlink='http://www.w3.org/1999/xlink';
declare namespace soapenv='http://schemas.xmlsoap.org/soap/envelope/';
declare namespace gmlcov='http://www.opengis.net/gmlcov/1.0';
//wcs:Contents</path><content><![CDATA[<wcs:Contents xmlns:wcs="http://www.opengis.net/wcs/2.0">
  <wcs:CoverageSummary>
    <wcs:CoverageId>MER_FRS_1PNPDE20060816_090929_000001972050_00222_23322_0058_uint16_reduced_compressed</wcs:CoverageId>
    <wcs:CoverageSubtype>RectifiedDataset</wcs:CoverageSubtype>
  </wcs:CoverageSummary>
  <wcs:CoverageSummary>
    <wcs:CoverageId>mosaic_MER_FRS_1PNPDE20060816_090929_000001972050_00222_23322_0058_RGB_reduced</wcs:CoverageId>
    <wcs:CoverageSubtype>RectifiedDataset</wcs:CoverageSubtype>
  </wcs:CoverageSummary>
  <wcs:CoverageSummary>
    <wcs:CoverageId>mosaic_MER_FRS_1P_RGB_reduced</wcs:CoverageId>
    <wcs:CoverageSubtype>RectifiedStitchedMosaic</wcs:CoverageSubtype>
  </wcs:CoverageSummary>
  <wcseo:DatasetSeriesSummary xmlns:wcseo="http://www.opengis.net/wcseo/1.0">
    <ows:WGS84BoundingBox xmlns:ows="http://www.opengis.net/ows/2.0">
      <ows:LowerCorner>-4.04296900 32.08007800</ows:LowerCorner>
      <ows:UpperCorner>33.13476600 45.17578100</ows:UpperCorner>
    </ows:WGS84BoundingBox>
    <wcseo:DatasetSeriesId>MER_FRS_1P_reduced</wcseo:DatasetSeriesId>
    <gml:TimePeriod gml:id="MER_FRS_1P_reduced_timeperiod" xmlns:gml="http://www.opengis.net/gml/3.2">
      <gml:beginPosition>2006-08-16T00:00:00</gml:beginPosition>
      <gml:endPosition>2006-08-31T00:00:00</gml:endPosition>
    </gml:TimePeriod>
  </wcseo:DatasetSeriesSummary>
</wcs:Contents>]]></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig action="ooosRP#GetCapabilities" mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="Delay" disabled="true"><con:settings/><con:config><delay>300</delay></con:config></con:testStep><con:properties/></con:testCase>
<con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DescribeCoverage Valid TestCase" searchProperties="true"><con:settings/>
  <con:testStep type="request" name="DescribeCoverage">
    <con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>spSoapBinding</con:interface><con:operation>DescribeCoverage</con:operation><con:request name="DescribeCoverage">
    <con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding>
    <con:endpoint>http://176.9.245.37/sp_eowcs</con:endpoint>
    <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" 
xmlns:ns="http://www.opengis.net/wcs/2.0">
   <soapenv:Header/>
   <soapenv:Body>
      <ns:DescribeCoverage service="WCS" version="2.0.0">
         <ns:CoverageId>MER_FRS_1PNPDE20060816_090929_000001972050_00222_23322_0058_uint16_reduced_compressed</ns:CoverageId>
      </ns:DescribeCoverage>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault"/><con:assertion type="GroovyScriptAssertion" name="Schema compliance via  xmllint"><con:configuration><scriptText>/*
 *  SOAPUI script to check DescribeCoverage response against the proposed
 *  WCS 2.0 schema.  
 *  Checking is done by running xmllint externally. 
 *  The schema definition must be available via a catalog, defined by the 
 *   XML_CATALOG_FILES env variable. This variable must be available in 
 *  bash upon startup (i.e. set in .bashrc)
 *
 *  Copyright (C) 2011 ANF DATA spol. s r.o. 
 */

ff = new File("/tmp", "soapui_GC_lock");
assert ff.createNewFile()

def tmpf = File.createTempFile("desCovR", ".xml")
tmpf.deleteOnExit()
tmpf.write( context.expand( '${DescribeCoverage#Response#//wcs:CoverageDescriptions}') )
def fn = tmpf.getPath()
def cmdln = ["bash", "-c", "xmllint -noout --schema http://schemas.opengis.net/wcs/2.0/wcsAll.xsd $fn"]
def result = cmdln.execute().getErrorStream()
def resStr = result.text
ff.delete()
println resStr
assert resStr.indexOf('validates') > 1</scriptText></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains CoverageDescription"><con:configuration><token>CoverageDescription</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig action="ooosRP#DescribeCoverage" mustUnderstand="NONE" version="200508"/>
<con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DescribeEOCoverageSet Valid TestCase" searchProperties="true"><con:settings/><con:testStep type="request" name="DescribeEOCoverageSet"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>spSoapBinding</con:interface><con:operation>DescribeEOCoverageSet</con:operation><con:request name="DescribeEOCoverageSet"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://176.9.245.37/sp_eowcs</con:endpoint><con:request><![CDATA[<soapenv:Envelope 
xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" 
xmlns:wcseo="http://www.opengis.net/wcseo/1.0"
xmlns:wcs="http://www.opengis.net/wcs/2.0">
   <soapenv:Header/>
   <soapenv:Body>
      <wcseo:DescribeEOCoverageSet service="WCS" version="2.0.0" count="100">
       <wcseo:eoId>MER_FRS_1P_reduced</wcseo:eoId>
       <wcseo:containment>OVERLAPS</wcseo:containment>
       <wcseo:Sections>
          <wcseo:Section>All</wcseo:Section>
       </wcseo:Sections>
       <wcs:DimensionTrim>
          <wcs:Dimension>Long</wcs:Dimension>
          <wcs:TrimLow>16</wcs:TrimLow>
          <wcs:TrimHigh>18</wcs:TrimHigh>
       </wcs:DimensionTrim>
       <wcs:DimensionTrim>
          <wcs:Dimension>Lat</wcs:Dimension>
          <wcs:TrimLow>46</wcs:TrimLow>
          <wcs:TrimHigh>48</wcs:TrimHigh>
       </wcs:DimensionTrim>
      </wcseo:DescribeEOCoverageSet>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="Schema Compliance"><con:configuration/></con:assertion><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XQuery Match" name="XQuery Match EOCoverageSetDescription"><con:configuration><path>declare namespace wcseo="http://www.opengis.net/wcseo/1.0";
declare namespace xsi="http://www.w3.org/2001/XMLSchema-instance" ;
declare namespace gml="http://www.opengis.net/gml/3.2";
declare namespace eop="http://www.opengis.net/eop/2.0";
declare namespace xlink="http://www.w3.org/1999/xlink" ;
declare namespace om="http://www.opengis.net/om/2.0" ;
declare namespace wcs="http://www.opengis.net/wcs/2.0" ;
declare namespace swe='http://www.opengis.net/swe/2.0';
declare namespace gmlcov='http://www.opengis.net/gmlcov/1.0';
//wcseo:EOCoverageSetDescription</path><content><![CDATA[<wcseo:EOCoverageSetDescription numberReturned="2" xsi:schemaLocation="http://www.opengis.net/wcseo/1.0 http://schemas.opengis.net/wcseo/1.0/wcsEOAll.xsd" numberMatched="2" xmlns:wcseo="http://www.opengis.net/wcseo/1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:eop="http://www.opengis.net/eop/2.0" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:gmlcov="http://www.opengis.net/gmlcov/1.0" xmlns:om="http://www.opengis.net/om/2.0" xmlns:wcs="http://www.opengis.net/wcs/2.0" xmlns:swe="http://www.opengis.net/swe/2.0">
  <wcs:CoverageDescriptions>
    <wcs:CoverageDescription gml:id="MER_FRS_1PNPDE20060816_090929_000001972050_00222_23322_0058_uint16_reduced_compressed">
      <gml:boundedBy>
        <gml:Envelope uomLabels="deg deg" axisLabels="lat long" srsName="http://www.opengis.net/def/crs/EPSG/0/4326" srsDimension="2">
          <gml:lowerCorner>32.26974600 11.64834400</gml:lowerCorner>
          <gml:upperCorner>46.21655800 27.96859100</gml:upperCorner>
        </gml:Envelope>
      </gml:boundedBy>
      <wcs:CoverageId>MER_FRS_1PNPDE20060816_090929_000001972050_00222_23322_0058_uint16_reduced_compressed</wcs:CoverageId>
      <gmlcov:metadata>
        <wcseo:EOMetadata>
          <eop:EarthObservation xsi:schemaLocation="http://www.opengis.net/opt/2.0 ../xsd/opt.xsd" gml:id="eop_MER_FRS_1PNPDE20060816_090929_000001972050_00222_23322_0058_uint16_reduced_compressed">
            <om:phenomenonTime>
              <gml:TimePeriod gml:id="tp_MER_FRS_1PNPDE20060816_090929_000001972050_00222_23322_0058_uint16_reduced_compressed">
                <gml:beginPosition>2006-08-16T09:09:29Z</gml:beginPosition>
                <gml:endPosition>2006-08-16T09:12:46Z</gml:endPosition>
              </gml:TimePeriod>
            </om:phenomenonTime>
            <om:resultTime>
              <!--repeat of archiving date?-->
              <gml:TimeInstant gml:id="archivingdate_MER_FRS_1PNPDE20060816_090929_000001972050_00222_23322_0058_uint16_reduced_compressed">
                <gml:timePosition>2006-08-16T11:03:08Z</gml:timePosition>
              </gml:TimeInstant>
            </om:resultTime>
            <om:procedure>
              <eop:EarthObservationEquipment gml:id="equ_MER_FRS_1PNPDE20060816_090929_000001972050_00222_23322_0058_uint16_reduced_compressed">
                <eop:platform>
                  <eop:Platform>
                    <eop:shortName>ENVISAT</eop:shortName>
                  </eop:Platform>
                </eop:platform>
                <eop:instrument>
                  <eop:Instrument>
                    <eop:shortName>MERIS</eop:shortName>
                  </eop:Instrument>
                </eop:instrument>
                <eop:sensor>
                  <eop:Sensor>
                    <eop:sensorType>OPTICAL</eop:sensorType>
                  </eop:Sensor>
                </eop:sensor>
              </eop:EarthObservationEquipment>
            </om:procedure>
            <om:observedProperty xlink:href="#params1"/>
            <om:featureOfInterest>
              <eop:Footprint gml:id="footprint_MER_FRS_1PNPDE20060816_090929_000001972050_00222_23322_0058_uint16_reduced_compressed">
                <eop:multiExtentOf>
                  <gml:MultiSurface srsName="EPSG:4326" gml:id="ms_MER_FRS_1PNPDE20060816_090929_000001972050_00222_23322_0058_uint16_reduced_compressed">
                    <gml:surfaceMember>
                      <gml:Polygon gml:id="poly_MER_FRS_1PNPDE20060816_090929_000001972050_00222_23322_0058_uint16_reduced_compressed">
                        <gml:exterior>
                          <gml:LinearRing>
                            <gml:posList>14.322575965570632 46.216558117161831 14.889221273108005 46.152076035932481 15.714163344615594 46.044474823463794 16.939196215846479 45.874384258110481 18.041167934827204 45.707637144588894 19.696621277900043 45.437660686504373 21.061979138012749 45.188708312816836 22.146529676798433 44.985502338431836 22.972838987446604 44.817601054763827 24.216794365275184 44.548719301064217 25.078471192994467 44.3530257779924 25.619454330500787 44.22240050905593 27.09669054643166 43.869452681903326 27.968590771844294 43.648677594634755 27.608908709842403 42.914276071713552 26.904154140811876 41.406744994495533 26.231198447937022 39.890886830729123 25.792810051163016 38.857425138443418 25.159378338866166 37.327455393788711 24.607823210234383 35.916979840274777 24.126821684115889 34.659955537947333 23.695476694402991 33.485864484245845 23.26447084501703 32.269745756399814 21.93771962779514 32.597366402196513 20.490341506430831 32.937415353394336 18.720985177579344 33.329502252603099 17.307239088316752 33.615994276288191 16.11996944899975 33.851259307900314 14.837090472242945 34.086158876902616 13.6927083205932 34.286728058386622 12.702328609369403 34.450209004129491 11.648344319329102 34.61257554817076 11.818952124495301 35.404301926952847 12.060892168743793 36.49644381567186 12.273681516152488 37.456615498759454 12.465752226451535 38.338767896663171 12.658488985584443 39.179619054397598 12.861885998466006 40.085426060828823 13.125704236676295 41.224754298927756 13.249297855403793 41.773101066725957 13.442093948019213 42.58703007421078 13.64731130090046 43.450338489759865 13.749195683701547 43.879741506184544 13.904244341338821 44.515959757778518 14.076176234357471 45.247153632802366 14.215619939492056 45.812576564427765 14.322575965570632 46.216558117161831</gml:posList>
                          </gml:LinearRing>
                        </gml:exterior>
                      </gml:Polygon>
                    </gml:surfaceMember>
                  </gml:MultiSurface>
                </eop:multiExtentOf>
              </eop:Footprint>
            </om:featureOfInterest>
            <om:result/>
            <eop:metaDataProperty>
              <eop:EarthObservationMetaData>
                <eop:identifier>MER_FRS_1PNPDE20060816_090929_000001972050_00222_23322_0058_uint16_reduced_compressed</eop:identifier>
                <eop:acquisitionType>NOMINAL</eop:acquisitionType>
                <eop:productType>MER_FRS_1P</eop:productType>
                <eop:status>ARCHIVED</eop:status>
                <eop:downlinkedTo>
                  <eop:DownlinkInformation>
                    <eop:acquisitionStation>PDHS-E</eop:acquisitionStation>
                  </eop:DownlinkInformation>
                </eop:downlinkedTo>
                <eop:processing>
                  <eop:ProcessingInformation>
                    <eop:processingCenter>PDHS-E</eop:processingCenter>
                  </eop:ProcessingInformation>
                </eop:processing>
              </eop:EarthObservationMetaData>
            </eop:metaDataProperty>
          </eop:EarthObservation>
        </wcseo:EOMetadata>
      </gmlcov:metadata>
      <gml:domainSet>
        <gml:RectifiedGrid dimension="2" gml:id="MER_FRS_1PNPDE20060816_090929_000001972050_00222_23322_0058_uint16_reduced_compressed_grid">
          <gml:limits>
            <gml:GridEnvelope>
              <gml:low>0 0</gml:low>
              <gml:high>538 447</gml:high>
            </gml:GridEnvelope>
          </gml:limits>
          <gml:axisLabels>long lat</gml:axisLabels>
          <gml:origin>
            <gml:Point srsName="http://www.opengis.net/def/crs/EPSG/0/4326" gml:id="MER_FRS_1PNPDE20060816_090929_000001972050_00222_23322_0058_uint16_reduced_compressed_grid_origin">
              <gml:pos>11.36106586 46.25202560</gml:pos>
            </gml:Point>
          </gml:origin>
          <gml:offsetVector srsName="http://www.opengis.net/def/crs/EPSG/0/4326">0.03139662 0.0</gml:offsetVector>
          <gml:offsetVector srsName="http://www.opengis.net/def/crs/EPSG/0/4326">0.0 -0.03136290</gml:offsetVector>
        </gml:RectifiedGrid>
      </gml:domainSet>
      <gmlcov:rangeType>
        <swe:DataRecord>
          <swe:field name="MERIS_radiance_01_uint16">
            <swe:Quantity definition="http://www.opengis.net/def/property/OGC/0/Radiance">
              <swe:description>MERIS first band</swe:description>
              <swe:nilValues/>
              <swe:uom code="W.m-2.sr-1.nm-1"/>
              <swe:constraint>
                <swe:AllowedValues>
                  <swe:interval>0 65535</swe:interval>
                  <swe:significantFigures>5</swe:significantFigures>
                </swe:AllowedValues>
              </swe:constraint>
            </swe:Quantity>
          </swe:field>
          <swe:field name="MERIS_radiance_02_uint16">
            <swe:Quantity definition="http://www.opengis.net/def/property/OGC/0/Radiance">
              <swe:description>MERIS uint16 second band</swe:description>
              <swe:nilValues/>
              <swe:uom code="W.m-2.sr-1.nm-1"/>
              <swe:constraint>
                <swe:AllowedValues>
                  <swe:interval>0 65535</swe:interval>
                  <swe:significantFigures>5</swe:significantFigures>
                </swe:AllowedValues>
              </swe:constraint>
            </swe:Quantity>
          </swe:field>
          <swe:field name="MERIS_radiance_03_uint16">
            <swe:Quantity definition="http://www.opengis.net/def/property/OGC/0/Radiance">
              <swe:description>MERIS uint16 third band</swe:description>
              <swe:nilValues/>
              <swe:uom code="W.m-2.sr-1.nm-1"/>
              <swe:constraint>
                <swe:AllowedValues>
                  <swe:interval>0 65535</swe:interval>
                  <swe:significantFigures>5</swe:significantFigures>
                </swe:AllowedValues>
              </swe:constraint>
            </swe:Quantity>
          </swe:field>
          <swe:field name="MERIS_radiance_04_uint16">
            <swe:Quantity definition="http://www.opengis.net/def/property/OGC/0/Radiance">
              <swe:description>MERIS uint16 fourth band</swe:description>
              <swe:nilValues/>
              <swe:uom code="W.m-2.sr-1.nm-1"/>
              <swe:constraint>
                <swe:AllowedValues>
                  <swe:interval>0 65535</swe:interval>
                  <swe:significantFigures>5</swe:significantFigures>
                </swe:AllowedValues>
              </swe:constraint>
            </swe:Quantity>
          </swe:field>
          <swe:field name="MERIS_radiance_05_uint16">
            <swe:Quantity definition="http://www.opengis.net/def/property/OGC/0/Radiance">
              <swe:description>MERIS uint16 fifth band</swe:description>
              <swe:nilValues/>
              <swe:uom code="W.m-2.sr-1.nm-1"/>
              <swe:constraint>
                <swe:AllowedValues>
                  <swe:interval>0 65535</swe:interval>
                  <swe:significantFigures>5</swe:significantFigures>
                </swe:AllowedValues>
              </swe:constraint>
            </swe:Quantity>
          </swe:field>
          <swe:field name="MERIS_radiance_06_uint16">
            <swe:Quantity definition="http://www.opengis.net/def/property/OGC/0/Radiance">
              <swe:description>MERIS uint16 sixth band</swe:description>
              <swe:nilValues/>
              <swe:uom code="W.m-2.sr-1.nm-1"/>
              <swe:constraint>
                <swe:AllowedValues>
                  <swe:interval>0 65535</swe:interval>
                  <swe:significantFigures>5</swe:significantFigures>
                </swe:AllowedValues>
              </swe:constraint>
            </swe:Quantity>
          </swe:field>
          <swe:field name="MERIS_radiance_07_uint16">
            <swe:Quantity definition="http://www.opengis.net/def/property/OGC/0/Radiance">
              <swe:description>MERIS uint16 seventh band</swe:description>
              <swe:nilValues/>
              <swe:uom code="W.m-2.sr-1.nm-1"/>
              <swe:constraint>
                <swe:AllowedValues>
                  <swe:interval>0 65535</swe:interval>
                  <swe:significantFigures>5</swe:significantFigures>
                </swe:AllowedValues>
              </swe:constraint>
            </swe:Quantity>
          </swe:field>
          <swe:field name="MERIS_radiance_08_uint16">
            <swe:Quantity definition="http://www.opengis.net/def/property/OGC/0/Radiance">
              <swe:description>MERIS uint16 eighth band</swe:description>
              <swe:nilValues/>
              <swe:uom code="W.m-2.sr-1.nm-1"/>
              <swe:constraint>
                <swe:AllowedValues>
                  <swe:interval>0 65535</swe:interval>
                  <swe:significantFigures>5</swe:significantFigures>
                </swe:AllowedValues>
              </swe:constraint>
            </swe:Quantity>
          </swe:field>
          <swe:field name="MERIS_radiance_09_uint16">
            <swe:Quantity definition="http://www.opengis.net/def/property/OGC/0/Radiance">
              <swe:description>MERIS uint16 ninth band</swe:description>
              <swe:nilValues/>
              <swe:uom code="W.m-2.sr-1.nm-1"/>
              <swe:constraint>
                <swe:AllowedValues>
                  <swe:interval>0 65535</swe:interval>
                  <swe:significantFigures>5</swe:significantFigures>
                </swe:AllowedValues>
              </swe:constraint>
            </swe:Quantity>
          </swe:field>
          <swe:field name="MERIS_radiance_10_uint16">
            <swe:Quantity definition="http://www.opengis.net/def/property/OGC/0/Radiance">
              <swe:description>MERIS uint16 tenth band</swe:description>
              <swe:nilValues/>
              <swe:uom code="W.m-2.sr-1.nm-1"/>
              <swe:constraint>
                <swe:AllowedValues>
                  <swe:interval>0 65535</swe:interval>
                  <swe:significantFigures>5</swe:significantFigures>
                </swe:AllowedValues>
              </swe:constraint>
            </swe:Quantity>
          </swe:field>
          <swe:field name="MERIS_radiance_11_uint16">
            <swe:Quantity definition="http://www.opengis.net/def/property/OGC/0/Radiance">
              <swe:description>MERIS uint16 eleventh band</swe:description>
              <swe:nilValues/>
              <swe:uom code="W.m-2.sr-1.nm-1"/>
              <swe:constraint>
                <swe:AllowedValues>
                  <swe:interval>0 65535</swe:interval>
                  <swe:significantFigures>5</swe:significantFigures>
                </swe:AllowedValues>
              </swe:constraint>
            </swe:Quantity>
          </swe:field>
          <swe:field name="MERIS_radiance_12_uint16">
            <swe:Quantity definition="http://www.opengis.net/def/property/OGC/0/Radiance">
              <swe:description>MERIS uint16 twelfth band</swe:description>
              <swe:nilValues/>
              <swe:uom code="W.m-2.sr-1.nm-1"/>
              <swe:constraint>
                <swe:AllowedValues>
                  <swe:interval>0 65535</swe:interval>
                  <swe:significantFigures>5</swe:significantFigures>
                </swe:AllowedValues>
              </swe:constraint>
            </swe:Quantity>
          </swe:field>
          <swe:field name="MERIS_radiance_13_uint16">
            <swe:Quantity definition="http://www.opengis.net/def/property/OGC/0/Radiance">
              <swe:description>MERIS uint 16 thirteenth band</swe:description>
              <swe:nilValues/>
              <swe:uom code="W.m-2.sr-1.nm-1"/>
              <swe:constraint>
                <swe:AllowedValues>
                  <swe:interval>0 65535</swe:interval>
                  <swe:significantFigures>5</swe:significantFigures>
                </swe:AllowedValues>
              </swe:constraint>
            </swe:Quantity>
          </swe:field>
          <swe:field name="MERIS_radiance_14_uint16">
            <swe:Quantity definition="http://www.opengis.net/def/property/OGC/0/Radiance">
              <swe:description>MERIS uint16 fourteenth band</swe:description>
              <swe:nilValues/>
              <swe:uom code="W.m-2.sr-1.nm-1"/>
              <swe:constraint>
                <swe:AllowedValues>
                  <swe:interval>0 65535</swe:interval>
                  <swe:significantFigures>5</swe:significantFigures>
                </swe:AllowedValues>
              </swe:constraint>
            </swe:Quantity>
          </swe:field>
          <swe:field name="MERIS_radiance_15_uint16">
            <swe:Quantity definition="http://www.opengis.net/def/property/OGC/0/Radiance">
              <swe:description>MERIS uint16 fifteenth band</swe:description>
              <swe:nilValues/>
              <swe:uom code="W.m-2.sr-1.nm-1"/>
              <swe:constraint>
                <swe:AllowedValues>
                  <swe:interval>0 65535</swe:interval>
                  <swe:significantFigures>5</swe:significantFigures>
                </swe:AllowedValues>
              </swe:constraint>
            </swe:Quantity>
          </swe:field>
        </swe:DataRecord>
      </gmlcov:rangeType>
      <wcs:ServiceParameters>
        <wcs:CoverageSubtype>RectifiedDataset</wcs:CoverageSubtype>
      </wcs:ServiceParameters>
    </wcs:CoverageDescription>
    <wcs:CoverageDescription gml:id="mosaic_MER_FRS_1PNPDE20060816_090929_000001972050_00222_23322_0058_RGB_reduced">
      <gml:boundedBy>
        <gml:Envelope uomLabels="deg deg" axisLabels="lat long" srsName="http://www.opengis.net/def/crs/EPSG/0/4326" srsDimension="2">
          <gml:lowerCorner>32.26974600 11.64834400</gml:lowerCorner>
          <gml:upperCorner>46.21655800 27.96859100</gml:upperCorner>
        </gml:Envelope>
      </gml:boundedBy>
      <wcs:CoverageId>mosaic_MER_FRS_1PNPDE20060816_090929_000001972050_00222_23322_0058_RGB_reduced</wcs:CoverageId>
      <gmlcov:metadata>
        <wcseo:EOMetadata>
          <eop:EarthObservation xsi:schemaLocation="http://www.opengis.net/opt/2.0 ../xsd/opt.xsd" gml:id="eop_mosaic_MER_FRS_1PNPDE20060816_090929_000001972050_00222_23322_0058_RGB_reduced">
            <om:phenomenonTime>
              <gml:TimePeriod gml:id="tp_mosaic_MER_FRS_1PNPDE20060816_090929_000001972050_00222_23322_0058_RGB_reduced">
                <gml:beginPosition>2006-08-16T09:09:29Z</gml:beginPosition>
                <gml:endPosition>2006-08-16T09:12:46Z</gml:endPosition>
              </gml:TimePeriod>
            </om:phenomenonTime>
            <om:resultTime>
              <!--repeat of archiving date?-->
              <gml:TimeInstant gml:id="archivingdate_mosaic_MER_FRS_1PNPDE20060816_090929_000001972050_00222_23322_0058_RGB_reduced">
                <gml:timePosition>2006-08-16T11:03:08Z</gml:timePosition>
              </gml:TimeInstant>
            </om:resultTime>
            <om:procedure>
              <eop:EarthObservationEquipment gml:id="equ_mosaic_MER_FRS_1PNPDE20060816_090929_000001972050_00222_23322_0058_RGB_reduced">
                <eop:platform>
                  <eop:Platform>
                    <eop:shortName>ENVISAT</eop:shortName>
                  </eop:Platform>
                </eop:platform>
                <eop:instrument>
                  <eop:Instrument>
                    <eop:shortName>MERIS</eop:shortName>
                  </eop:Instrument>
                </eop:instrument>
                <eop:sensor>
                  <eop:Sensor>
                    <eop:sensorType>OPTICAL</eop:sensorType>
                  </eop:Sensor>
                </eop:sensor>
              </eop:EarthObservationEquipment>
            </om:procedure>
            <om:observedProperty xlink:href="#params1"/>
            <om:featureOfInterest>
              <eop:Footprint gml:id="footprint_mosaic_MER_FRS_1PNPDE20060816_090929_000001972050_00222_23322_0058_RGB_reduced">
                <eop:multiExtentOf>
                  <gml:MultiSurface srsName="EPSG:4326" gml:id="ms_mosaic_MER_FRS_1PNPDE20060816_090929_000001972050_00222_23322_0058_RGB_reduced">
                    <gml:surfaceMember>
                      <gml:Polygon gml:id="poly_mosaic_MER_FRS_1PNPDE20060816_090929_000001972050_00222_23322_0058_RGB_reduced">
                        <gml:exterior>
                          <gml:LinearRing>
                            <gml:posList>14.322575965570632 46.216558117161831 14.889221273108005 46.152076035932481 15.714163344615594 46.044474823463794 16.939196215846479 45.874384258110481 18.041167934827204 45.707637144588894 19.696621277900043 45.437660686504373 21.061979138012749 45.188708312816836 22.146529676798433 44.985502338431836 22.972838987446604 44.817601054763827 24.216794365275184 44.548719301064217 25.078471192994467 44.3530257779924 25.619454330500787 44.22240050905593 27.09669054643166 43.869452681903326 27.968590771844294 43.648677594634755 27.608908709842403 42.914276071713552 26.904154140811876 41.406744994495533 26.231198447937022 39.890886830729123 25.792810051163016 38.857425138443418 25.159378338866166 37.327455393788711 24.607823210234383 35.916979840274777 24.126821684115889 34.659955537947333 23.695476694402991 33.485864484245845 23.26447084501703 32.269745756399814 21.93771962779514 32.597366402196513 20.490341506430831 32.937415353394336 18.720985177579344 33.329502252603099 17.307239088316752 33.615994276288191 16.11996944899975 33.851259307900314 14.837090472242945 34.086158876902616 13.6927083205932 34.286728058386622 12.702328609369403 34.450209004129491 11.648344319329102 34.61257554817076 11.818952124495301 35.404301926952847 12.060892168743793 36.49644381567186 12.273681516152488 37.456615498759454 12.465752226451535 38.338767896663171 12.658488985584443 39.179619054397598 12.861885998466006 40.085426060828823 13.125704236676295 41.224754298927756 13.249297855403793 41.773101066725957 13.442093948019213 42.58703007421078 13.64731130090046 43.450338489759865 13.749195683701547 43.879741506184544 13.904244341338821 44.515959757778518 14.076176234357471 45.247153632802366 14.215619939492056 45.812576564427765 14.322575965570632 46.216558117161831</gml:posList>
                          </gml:LinearRing>
                        </gml:exterior>
                      </gml:Polygon>
                    </gml:surfaceMember>
                  </gml:MultiSurface>
                </eop:multiExtentOf>
              </eop:Footprint>
            </om:featureOfInterest>
            <om:result/>
            <eop:metaDataProperty>
              <eop:EarthObservationMetaData>
                <eop:identifier>mosaic_MER_FRS_1PNPDE20060816_090929_000001972050_00222_23322_0058_RGB_reduced</eop:identifier>
                <eop:acquisitionType>NOMINAL</eop:acquisitionType>
                <eop:productType>MER_FRS_1P</eop:productType>
                <eop:status>ARCHIVED</eop:status>
                <eop:downlinkedTo>
                  <eop:DownlinkInformation>
                    <eop:acquisitionStation>PDHS-E</eop:acquisitionStation>
                  </eop:DownlinkInformation>
                </eop:downlinkedTo>
                <eop:processing>
                  <eop:ProcessingInformation>
                    <eop:processingCenter>PDHS-E</eop:processingCenter>
                  </eop:ProcessingInformation>
                </eop:processing>
              </eop:EarthObservationMetaData>
            </eop:metaDataProperty>
          </eop:EarthObservation>
        </wcseo:EOMetadata>
      </gmlcov:metadata>
      <gml:domainSet>
        <gml:RectifiedGrid dimension="2" gml:id="mosaic_MER_FRS_1PNPDE20060816_090929_000001972050_00222_23322_0058_RGB_reduced_grid">
          <gml:limits>
            <gml:GridEnvelope>
              <gml:low>0 0</gml:low>
              <gml:high>540 448</gml:high>
            </gml:GridEnvelope>
          </gml:limits>
          <gml:axisLabels>long lat</gml:axisLabels>
          <gml:origin>
            <gml:Point srsName="http://www.opengis.net/def/crs/EPSG/0/4326" gml:id="mosaic_MER_FRS_1PNPDE20060816_090929_000001972050_00222_23322_0058_RGB_reduced_grid_origin">
              <gml:pos>11.33175500 46.26864500</gml:pos>
            </gml:Point>
          </gml:origin>
          <gml:offsetVector srsName="http://www.opengis.net/def/crs/EPSG/0/4326">0.03135500 0.0</gml:offsetVector>
          <gml:offsetVector srsName="http://www.opengis.net/def/crs/EPSG/0/4326">0.0 -0.03135500</gml:offsetVector>
        </gml:RectifiedGrid>
      </gml:domainSet>
      <gmlcov:rangeType>
        <swe:DataRecord>
          <swe:field name="red">
            <swe:Quantity definition="http://www.opengis.net/def/property/OGC/0/Radiance">
              <swe:description>Red Channel</swe:description>
              <swe:nilValues/>
              <swe:uom code="W.m-2.Sr-1"/>
              <swe:constraint>
                <swe:AllowedValues>
                  <swe:interval>0 255</swe:interval>
                  <swe:significantFigures>3</swe:significantFigures>
                </swe:AllowedValues>
              </swe:constraint>
            </swe:Quantity>
          </swe:field>
          <swe:field name="green">
            <swe:Quantity definition="http://www.opengis.net/def/property/OGC/0/Radiance">
              <swe:description>Green Channel</swe:description>
              <swe:nilValues/>
              <swe:uom code="W.m-2.Sr-1"/>
              <swe:constraint>
                <swe:AllowedValues>
                  <swe:interval>0 255</swe:interval>
                  <swe:significantFigures>3</swe:significantFigures>
                </swe:AllowedValues>
              </swe:constraint>
            </swe:Quantity>
          </swe:field>
          <swe:field name="blue">
            <swe:Quantity definition="http://www.opengis.net/def/property/OGC/0/Radiance">
              <swe:description>Blue Channel</swe:description>
              <swe:nilValues/>
              <swe:uom code="W.m-2.Sr-1"/>
              <swe:constraint>
                <swe:AllowedValues>
                  <swe:interval>0 255</swe:interval>
                  <swe:significantFigures>3</swe:significantFigures>
                </swe:AllowedValues>
              </swe:constraint>
            </swe:Quantity>
          </swe:field>
        </swe:DataRecord>
      </gmlcov:rangeType>
      <wcs:ServiceParameters>
        <wcs:CoverageSubtype>RectifiedDataset</wcs:CoverageSubtype>
      </wcs:ServiceParameters>
    </wcs:CoverageDescription>
  </wcs:CoverageDescriptions>
  <wcseo:DatasetSeriesDescriptions>
    <wcseo:DatasetSeriesDescription gml:id="MER_FRS_1P_reduced">
      <gml:boundedBy>
        <gml:Envelope uomLabels="deg deg" axisLabels="lat long" srsName="http://www.opengis.net/def/crs/EPSG/0/4326" srsDimension="2">
          <gml:lowerCorner>32.08007800 -4.04296900</gml:lowerCorner>
          <gml:upperCorner>45.17578100 33.13476600</gml:upperCorner>
        </gml:Envelope>
      </gml:boundedBy>
      <wcseo:DatasetSeriesId>MER_FRS_1P_reduced</wcseo:DatasetSeriesId>
      <gml:TimePeriod gml:id="MER_FRS_1P_reduced_timeperiod">
        <gml:beginPosition>2006-08-16T00:00:00</gml:beginPosition>
        <gml:endPosition>2006-08-31T00:00:00</gml:endPosition>
      </gml:TimePeriod>
    </wcseo:DatasetSeriesDescription>
  </wcseo:DatasetSeriesDescriptions>
</wcseo:EOCoverageSetDescription>]]></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="GetCoverage Valid TestCase" searchProperties="true"><con:settings/><con:testStep type="request" name="GetCoverage"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>spSoapBinding</con:interface><con:operation>GetCoverage</con:operation><con:request name="GetCoverage"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://176.9.245.37/sp_eowcs</con:endpoint><con:request><![CDATA[<soapenv:Envelope 
xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" 
xmlns:wcs="http://www.opengis.net/wcs/2.0">
   <soapenv:Header/>
   <soapenv:Body>
      <wcs:GetCoverage service="WCS" version="2.0.0">
           <wcs:mediatype>multipart/mixed</wcs:mediatype>
          <wcs:Format>image/tiff</wcs:Format>
        <wcs:CoverageId>mosaic_MER_FRS_1PNPDE20060816_090929_000001972050_00222_23322_0058_RGB_reduced</wcs:CoverageId>
        <wcs:DimensionTrim>
          <wcs:Dimension>Long</wcs:Dimension>
          <wcs:TrimLow>16</wcs:TrimLow>
          <wcs:TrimHigh>18</wcs:TrimHigh>
        </wcs:DimensionTrim>
        <wcs:DimensionTrim>
          <wcs:Dimension>Lat</wcs:Dimension>
          <wcs:TrimLow>46</wcs:TrimLow>
          <wcs:TrimHigh>48</wcs:TrimHigh>
        </wcs:DimensionTrim>
      </wcs:GetCoverage>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
<con:assertion type="GroovyScriptAssertion" name="Validate Request"><con:configuration><scriptText>// Run xmllint using local schemas, set up via the XML_CATALOG_FILES env variable.
//  This variable must be available in bash upon startup (i.e. set in .bashrc)

ff = new File("/tmp", "soapui_GC2_lock");
assert ff.createNewFile()

def tmpf = File.createTempFile("getCovRq", ".xml")
tmpf.deleteOnExit()
tmpf.write( context.expand( '${GetCoverage#Request#//wcs:GetCoverage}') )
def fn = tmpf.getPath()
def cmdln = ["bash", "-c", "xmllint -noout --schema http://schemas.opengis.net/wcs/2.0/wcsAll.xsd $fn"]
def result = cmdln.execute().getErrorStream()
def resStr = result.text
ff.delete()
println resStr
assert resStr.indexOf('validates') > 1</scriptText></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault"/><con:assertion type="XQuery Match" name="Contains Coverage and Include elements"><con:configuration><path>declare namespace xop="http://www.w3.org/2004/08/xop/include";
declare namespace wcs="http://www.opengis.net/wcs/2.0";
//wcs:Coverage</path><content>&lt;wcs:Coverage xmlns:wcs="http://www.opengis.net/wcs/2.0">
  &lt;xop:Include href="*" xmlns:xop="http://www.w3.org/2004/08/xop/include"/>
&lt;/wcs:Coverage></content><allowWildcards>true</allowWildcards></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Verify attachment contents"><con:configuration><scriptText><![CDATA[/*
 *  SOAPUI script to check GetCoverage response for the presence of one attachement
 *  where the attchment contains the following regexps:
 *     "<(*):RectifiedDataset"  and 
 *     "</\1:RectifiedDataset" .
 *    "<(*):lineage*RequestMessage<(*):GetCoverage*</\2:GetCoverage*</\1:lineage>"
 *   Further, the attachment must contain a regexp "Content-Type: .* image/tiff".
 *
 *  Copyright (C) 2011 ANF DATA spol. s r.o. 
 */

assert messageExchange.responseAttachments.length == 1

def istr =  messageExchange.responseAttachments[0].getInputStream()
def attBytes = new byte[ messageExchange.responseAttachments[0].getSize()]
def nr = istr.read(attBytes)
def attachmentString  = new String(attBytes)

def xmlStartStr = "<?xml"
def xmlSection = attachmentString.substring(
	attachmentString.indexOf(xmlStartStr))

// A very simple check for a "RectifiedDataset" element,
// by means of simple string manipulations
def check1="RectifiedDataset"
def firstRGC = xmlSection.indexOf(check1)
def lastRGC = xmlSection.lastIndexOf(check1)
assert firstRGC  > 0
assert lastRGC>firstRGC
def endofXml =  xmlSection.indexOf(">", lastRGC)
xmlSection = xmlSection.substring(0,endofXml)
assert  xmlSection.matches("(?s).+?<\\s*([\\w]+):"+check1+".*</\\s*\\1:"+check1+".*")
	
// Check for "lineage" element with a "GetCoverage":
// "<(*):lineage<(*):RequestMessage<(*):GetCoverage*</\3:GetCoverage*</2RequestMessage*</\1:lineage>"
def ck_lineage="lineage"
def check3="RequestMessage"
def check4="GetCoverage"
assert  xmlSection.matches(
	"(?s).+?<\\s*([\\w]+):"+ck_lineage+
	".*(?s).+?<\\s*([\\w]+):"+check3+
	".*(?s).+?<\\s*([\\w]+):"+check4+
	".*</\\s*\\3:"+check4+
	".*</\\s*\\2:"+check3+
	".*</\\s*\\1:"+ck_lineage+".*")


// Check for "Content-Type: image/tiff" at the end
def imgTIffType = "image/tiff"
def lastType = attachmentString.lastIndexOf("Content-Type:")
assert attachmentString.indexOf(imgTIffType, lastType) > 0
log.info "Verification OK: Attachment contains expected '"+check1+", lineage data, and "+imgTIffType




]]></scriptText></con:configuration></con:assertion><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig action="ooosRP#GetCoverage" mustUnderstand="NONE" version="200508"/>
<con:wsrmConfig version="1.2"/></con:request>
</con:config>
</con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Unknown Operation TestCase" searchProperties="true"><con:description>Test for gettting a soap fault in response to an unrecognised operation.</con:description><con:settings/><con:testStep type="request" name="BadOperation"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>spSoapBinding</con:interface><con:operation>GetCapabilities</con:operation><con:request name="BadOperation"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://176.9.245.37/sp_eowcs</con:endpoint><con:request><![CDATA[<soapenv:Envelope 
  xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" 
  xmlns:ns="http://www.opengis.net/wcs/2.0" 
  xmlns:ns1="http://www.opengis.net/ows/2.0">
   <soapenv:Header/>
   <soapenv:Body>
      <ns:BadOp updateSequence="u2001" service="WCS"/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault"/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig action="ooosRP#GetCapabilities" mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DescribeCoverage Bad Id TestCase" searchProperties="true"><con:description>Test for an ivalid ID in DescribeCoverage.</con:description><con:settings/>
  <con:testStep type="request" name="BadId">
    <con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>spSoapBinding</con:interface><con:operation>DescribeCoverage</con:operation><con:request name="BadId">
    <con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding>
    <con:endpoint>http://176.9.245.37/sp_eowcs</con:endpoint>
    <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" 
xmlns:ns="http://www.opengis.net/wcs/2.0">
   <soapenv:Header/>
   <soapenv:Body>
      <ns:DescribeCoverage service="WCS" version="2.0.0">
         <ns:CoverageId>BadId</ns:CoverageId>
      </ns:DescribeCoverage>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault"/><con:assertion type="XQuery Match" name="XQuery Match"><con:configuration><path>declare namespace ows='http://www.opengis.net/ows/2.0';
//ows:Exception</path><content>&lt;ows:Exception locator="BadId" exceptionCode="NoSuchCoverage" xmlns:ows="http://www.opengis.net/ows/2.0">
  &lt;ows:ExceptionText>No coverage with coverage id 'BadId' found&lt;/ows:ExceptionText>
&lt;/ows:Exception></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig action="ooosRP#DescribeCoverage" mustUnderstand="NONE" version="200508"/>
<con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:properties/></con:testSuite>